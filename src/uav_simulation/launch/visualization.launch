<?xml version="1.0"?>
<launch>
  <!-- Visualization launch file -->
  <!-- Starts RViz with mission configuration and image viewers -->

  <!-- Arguments -->
  <arg name="rviz_config" default="$(find uav_simulation)/config/mission.rviz" />
  <arg name="show_camera" default="true" />
  <arg name="show_tracked" default="true" />

  <!-- RViz -->
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rviz_config)" output="screen" />

  <!-- Image viewers -->
  <group if="$(arg show_camera)">
    <node name="camera_view" pkg="rqt_image_view" type="rqt_image_view">
      <remap from="image" to="/uav/camera/image_raw" />
    </node>
  </group>

  <group if="$(arg show_tracked)">
    <node name="tracked_view" pkg="rqt_image_view" type="rqt_image_view">
      <remap from="image" to="/vision/tracked_image" />
    </node>
  </group>

  <!-- TF tree visualization -->
  <node name="tf_tree" pkg="rqt_tf_tree" type="rqt_tf_tree" />

  <!-- Plot mission data -->
  <node name="rqt_plot" pkg="rqt_plot" type="rqt_plot" args="/uav/state/pose/position/z /uav/state/distance_to_target" />

</launch>

